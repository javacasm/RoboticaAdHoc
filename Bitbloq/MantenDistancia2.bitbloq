{"description":"","userTags":[],"hardwareTags":["us","servocont","sp","bq ZUM"],"compiled":false,"imageType":"","videoUrl":"","defaultTheme":"infotab_option_colorTheme","software":{"vars":{"name":"varsBloq","content":[[]],"enable":true,"childs":[{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"Movimiento"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"2"}]],"enable":true}}]],"enable":true},{"name":"voidFunction","content":[[{"alias":"varInput","id":"FUNCNAME","value":"adelante"}]],"enable":true,"childs":[{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"string","content":[[{"alias":"stringInput","id":"TEXT","value":"Adelante!!"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"if","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"Movimiento","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":">"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true,"childs":[{"name":"continuousServoStart","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_izqda"},{"alias":"staticDropdown","id":"DIRECTION","value":"0"}]],"enable":true},{"name":"continuousServoStart","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_drcha"},{"alias":"staticDropdown","id":"DIRECTION","value":"180"}]],"enable":true}]}]},{"name":"voidFunction","content":[[{"alias":"varInput","id":"FUNCNAME","value":"Parar"}]],"enable":true,"childs":[{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"string","content":[[{"alias":"stringInput","id":"TEXT","value":"Para!!"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"if","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"Movimiento","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":">"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true,"childs":[{"name":"continuousServoStop","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_izqda"}]],"enable":true},{"name":"continuousServoStop","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_drcha"}]],"enable":true}]}]},{"name":"voidFunction","content":[[{"alias":"varInput","id":"FUNCNAME","value":"atras"}]],"enable":true,"childs":[{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"string","content":[[{"alias":"stringInput","id":"TEXT","value":"Atrás!!!"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"if","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"Movimiento","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":">"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true,"childs":[{"name":"continuousServoStart","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_izqda"},{"alias":"staticDropdown","id":"DIRECTION","value":"180"}]],"enable":true},{"name":"continuousServoStart","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_drcha"},{"alias":"staticDropdown","id":"DIRECTION","value":"0"}]],"enable":true}]}]}]},"setup":{"name":"setupBloq","content":[[]],"enable":true,"childs":[]},"loop":{"name":"loopBloq","content":[[]],"enable":true,"childs":[{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"distancia"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"ultrasonidos_0","valueType":"float"}]],"enable":true}}]],"enable":true},{"name":"if","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"distancia","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"<"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1000"}]],"enable":true}}]],"enable":true,"childs":[{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"distancia","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"if","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"distancia","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":">"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"30"}]],"enable":true}}]],"enable":true,"childs":[{"name":"invokeFunction","content":[[{"alias":"dynamicDropdown","id":"FUNCTION","value":"adelante","valueType":"void"}]],"enable":true}]},{"name":"elseif","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"distancia","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"<"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"20"}]],"enable":true}}]],"enable":true,"childs":[{"name":"invokeFunction","content":[[{"alias":"dynamicDropdown","id":"FUNCTION","value":"atras","valueType":"void"}]],"enable":true}]},{"name":"else","content":[[]],"enable":true,"childs":[{"name":"invokeFunction","content":[[{"alias":"dynamicDropdown","id":"FUNCTION","value":"Parar","valueType":"void"}]],"enable":true}]}]}]}},"hardware":{"components":[{"id":"us","uuid":"us","type":"US","width":120,"height":79,"dataReturnType":"float","pins":{"digital":["trigger","echo"]},"dragtype":"components","coordinates":{"x":48.46473029045643,"y":18.203033838973163},"category":"sensors","name":"ultrasonidos_0","connected":true,"uid":"30538be4-ffab-4f5a-a6e0-43673cdc0a32","pin":{"trigger":"8","echo":"7"},"endpoints":{"trigger":{"type":"digital","uid":"7774b3cb-bd01-44bd-a58d-93398e6dd27f"},"echo":{"type":"digital","uid":"eb73f23d-fb9e-4151-a13f-949e48875af7"}}},{"id":"servocont","uuid":"servocont","width":125,"height":106,"pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":32.946058091286304,"y":14.702450408401399},"category":"continuousServos","name":"servo_izqda","connected":true,"uid":"adea8faa-d56b-4ce1-8066-5066cf904e76","pin":{"s":"11"},"endpoints":{"s":{"type":"digital","uid":"d24a1a4d-1fe3-4e8f-9fa8-20ba234acb41"}}},{"id":"servocont","uuid":"servocont","width":125,"height":106,"pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":63.98340248962655,"y":14.935822637106183},"category":"continuousServos","name":"servo_drcha","connected":true,"uid":"d7a76946-1fdd-4d78-98e8-ac620fa51632","pin":{"s":"5"},"endpoints":{"s":{"type":"digital","uid":"f43df693-5b06-48cf-a6c3-4e2f640d9d79"}}},{"id":"sp","uuid":"sp","baudRate":"9600","width":115,"height":71,"pin":{"s":"serial"},"pins":{"serial":["s"]},"dragtype":"components","coordinates":{"x":18.92116182572614,"y":49.47491248541424},"category":"serialElements","name":"puerto_serie_0","connected":true,"uid":"0b9b97d4-8683-4d77-b9ad-71da45529424","endpoints":{"s":{"type":"serial","uid":"63f397b6-ea3d-4933-a22d-15e2cf448a49"}}}],"connections":[{"pinSourceUid":"7774b3cb-bd01-44bd-a58d-93398e6dd27f","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd05"},{"pinSourceUid":"eb73f23d-fb9e-4151-a13f-949e48875af7","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd06"},{"pinSourceUid":"f43df693-5b06-48cf-a6c3-4e2f640d9d79","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd08"},{"pinSourceUid":"d24a1a4d-1fe3-4e8f-9fa8-20ba234acb41","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd02"},{"pinSourceUid":"63f397b6-ea3d-4933-a22d-15e2cf448a49","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bc05"}],"board":"bq ZUM","robot":null},"code":"/***   Included libraries  ***/\n#include <BitbloqUS.h>\n#include <Servo.h>\n#include <BitbloqSoftwareSerial.h>\n\n\n/***   Global variables and function definition  ***/\nUS ultrasonidos_0( 8, 7);\nServo servo_izqda;\nServo servo_drcha;\nbqSoftwareSerial puerto_serie_0( 0, 1, 9600);\n\nfloat Movimiento = 2;\nvoid adelante (){puerto_serie_0.println(\"Adelante!!\");\nif(Movimiento > 0){servo_izqda.write(0);\nservo_drcha.write(180);\n}\n}\nvoid Parar (){puerto_serie_0.println(\"Para!!\");\nif(Movimiento > 0){servo_izqda.write(90);\nservo_drcha.write(90);\n}\n}\nvoid atras (){puerto_serie_0.println(\"Atrás!!!\");\nif(Movimiento > 0){servo_izqda.write(180);\nservo_drcha.write(0);\n}\n}\n\n\n\n/***   Setup  ***/void setup(){\nservo_izqda.attach(11);\nservo_drcha.attach(5);\npuerto_serie_0.begin(9600);\n\n}\n\n\n/***   Loop  ***/void loop(){float distancia = ultrasonidos_0.read();\nif(distancia < 1000){puerto_serie_0.println(distancia);\nif(distancia > 30){adelante();\n}\nelse if (distancia < 20){atras();\n}\nelse {Parar();\n}\n}\n}\n\n\n\n\n","exportedFromBitbloqOffline":true,"bitbloqOfflineVersion":"1.1.2","bloqsVersion":"0.1.13"}